(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,n){e.exports=n(231)},110:function(e,t,n){},112:function(e,t,n){},138:function(e,t){},141:function(e,t,n){},146:function(e,t){},148:function(e,t){},183:function(e,t){},184:function(e,t){},229:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(103),i=n.n(o),c=(n(110),n(11)),l=n(12),s=n(14),u=n(13),d=n(15),f=(n(112),n(104)),m=n.n(f)()("http://192.168.0.4:5000");function p(e,t){m.emit("train-control",{speed:Number(e),direction:t})}var b=function(e){function t(e){var n,a;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={proximity:"no data yet"},a=function(e,t){return n.setState({proximity:t})},m.on("proximity",function(e){console.log(e),a(null,e)}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"setStyles",value:function(){var e=this.state.proximity;return e<30?{width:e.toString()+"%",backgroundColor:"red"}:e<50?{width:e.toString()+"%",backgroundColor:"yellow"}:{width:(e<100?e:100).toString()+"%",backgroundColor:"green"}}},{key:"render",value:function(){return r.a.createElement("div",{className:"control-container"},r.a.createElement("h2",{className:"tab"},"Proximity"),r.a.createElement("div",null),r.a.createElement("div",{className:"test",style:this.setStyles()}))}}]),t}(a.Component),h=n(38),v=n(6);function g(){var e=Object(h.a)(["\n\nborder: none;\nwidth:80px;\nheight:80px;\nborder-radius: 40px;\nfont-size: 20px;\n}\n"]);return g=function(){return e},e}function O(){var e=Object(h.a)(["\n    \n    padding: 12px;\n    text-align: center;\n    color: #f2f2f2;\n    font-size: 30px;\n    line-height:1.8;\n}\n"]);return O=function(){return e},e}function j(){var e=Object(h.a)(["\n    text-align: center;\n    display: grid;\n    column-gap: 10px;\n    grid-template-columns: 1fr 3fr 3fr 1fr;\n"]);return j=function(){return e},e}var w=Object(v.a)(j()),y=Object(v.a)(O()),E=Object(v.a)(g()),k=function(e){function t(e){var n,a;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={sliderValue:0,direction:"Stopped",speed:0},a=function(e,t){console.log(t);var a=t.direction,r=t.speed,o=0;switch(a.toLowerCase()){case"forwards":o=r=r<0?-r:r;break;case"backwards":o=r<0?r:-r,r=r<0?-r:r;break;default:a="Stopped",r=0}console.log(o),n.setState({sliderValue:o,direction:n.capitalizeFirstLetter(a),speed:r})},m.on("train-remote-control",function(e){a(null,e)}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"setSliderValues",value:function(e){var t,n=e.target.value,a=0;n>0?(a=n,t="Forwards"):n<0?(a=-n,t="Backwards"):(a=Number(n),t="Stopped"),this.setState(function(e){return{sliderValue:n,direction:t,speed:a}}),p(a,t)}},{key:"stopTrain",value:function(){this.setState(function(e){return{sliderValue:0,direction:"Stopped",speed:Number(0)}}),p(0,"Stopped")}},{key:"displayStop",value:function(){var e=this;if(0!==this.state.speed)return Object(v.b)("button",{css:E,onClick:function(){return e.stopTrain()}},"STOP")}},{key:"render",value:function(){var e=this;return Object(v.b)("div",{className:"control-container"},Object(v.b)("h2",{className:"tab"},"Motor"),Object(v.b)("div",{css:w},Object(v.b)("div",null),Object(v.b)("div",{css:y},this.state.direction),Object(v.b)("div",{css:y},this.state.speed,"%"),Object(v.b)("button",{css:E,onClick:function(){return e.stopTrain()},className:0===this.state.speed?"bg-light-grey":"bg-red"},"STOP")),Object(v.b)("input",{type:"range",id:"start",name:"volume",min:"-100",max:"100",value:this.state.sliderValue,onChange:function(t){return e.setSliderValues(t)}}))}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).url="http://".concat(n.props.url,":").concat(n.props.port,"/video_feed"),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("figure",null,r.a.createElement("figcaption",null,this.props.caption),r.a.createElement("picture",null,r.a.createElement("img",{src:this.url,alt:"raw video feed from opencv on the RPI"})))}}]),t}(a.Component),x=n(28),N=(n(141),n(143)),C=function(e){function t(e){var n,a;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={proximity:"no data yet",info:[]},n.checkInfoItemExistsAndUpdate=function(e){if(!e)return console.log("error: no item ");var t=Object(x.a)(n.state.info);0!==(t=t.filter(function(t){return t.header===e.header})).length&&(t=(t=Object(x.a)(n.state.info)).filter(function(t){return t.header!==e.header}),n.setState({info:t}))},n.addInfoItem=function(e){var t=Object(x.a)(n.state.info);e.id=N(),e.time=new Date,t.push(e);t.sort(function(e,t){return new Date(t.time)-new Date(e.time)});n.setState({info:t}),console.log("Info Item added: ".concat(JSON.stringify(e)))},n.removeInfoItem=function(e){console.log(e);var t=Object(x.a)(n.state.info);t=t.filter(function(t){return t.id!==e}),n.setState({info:t})},a=function(e,t){console.log(t),t.header=String(t.header).trim(),n.checkInfoItemExistsAndUpdate(t),n.addInfoItem(t)},m.on("info",function(e){a(null,e)}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"info-control-container"},r.a.createElement("div",{className:"control-row-one"},r.a.createElement("p",{className:"label"},"Info")),r.a.createElement("div",{className:"control-row-two"},this.state.info.map(function(t){return r.a.createElement("div",{key:t.id,className:"item"},r.a.createElement("span",null,t.header),r.a.createElement("span",null,t.message),r.a.createElement("button",{onClick:function(){return e.removeInfoItem(t.id)}},"Remove"))})))}}]),t}(a.Component),I=(n(229),function(e){var t=function(e){console.log("blur")};return r.a.createElement("div",{className:"overlay",onClick:e.toggle},r.a.createElement("div",{className:"settings-panel",onClick:function(e){e.stopPropagation()}},r.a.createElement("h2",null,"Settings"),e.videoFeeds.map(function(e){return r.a.createElement("div",{className:"settings-panel-item",key:e.id},r.a.createElement("label",null,"URL:"),r.a.createElement("input",{type:"text",defaultValue:e.url,onBlur:t}),r.a.createElement("label",null,"Port:"),r.a.createElement("input",{type:"text",defaultValue:e.port}))})))}),F=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={videoFeeds:[{id:2,url:"192.168.0.4",port:"8081",caption:"raw"},{id:1,url:"192.168.0.18",port:"5000",caption:"Processed Feed"}],rawFeedUrl:"192.168.0.4",rawFeedPort:"8081",OpencvFeedUrl:"192.168.0.18",OpencvFeedPort:"5000",websocketUrl:"192.168.0.4",websocketPort:5e3,settingsShow:!1},n.toggleSettingsPage=function(){var e=n.state.settingsShow;n.setState({settingsShow:!e}),console.log(!e)},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;return this.state.settingsShow&&(e=r.a.createElement(I,{videoFeeds:this.state.videoFeeds,toggle:this.toggleSettingsPage,foo:"fff"})),r.a.createElement("main",null,e,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"feeds"},this.state.videoFeeds.map(function(e){return r.a.createElement(S,{key:e.id,url:e.url,port:e.port,caption:e.caption})}),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.toggleSettingsPage},"settings"))),r.a.createElement("div",{className:"controls"},r.a.createElement(b,null),r.a.createElement(k,null),r.a.createElement(C,null))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[105,2,1]]]);
//# sourceMappingURL=main.29debf7f.chunk.js.map